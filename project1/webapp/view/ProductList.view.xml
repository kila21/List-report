<mvc:View xmlns:core="sap.ui.core" 
 controllerName="project1.controller.ProductList"
 xmlns:mvc="sap.ui.core.mvc"
 xmlns="sap.m"
 xmlns:f="sap.f"
 xmlns:filterbar="sap.ui.comp.filterbar">
    <Page id="idProductListPage" title="{i18n>productListTitle}">
        <f:DynamicPage>
            <f:header>
                <f:DynamicPageHeader>
                    <f:content>
                        <filterbar:FilterBar
                         search="onFilterBarSearch"
                         showClearOnFB="true"
                         clear="onFilterBarClear">
                            <filterbar:filterGroupItems >
                                <filterbar:FilterGroupItem 
                                 groupName="Group1"
                                 name="Name"
                                 label="{i18n>filterName}"
                                 visibleInFilterBar="true">
                                    <filterbar:control>
                                        <SearchField 
                                         showSearchButton="false" 
                                         value="{filtersModel>/search}">
                                        </SearchField>
                                    </filterbar:control>
                                </filterbar:FilterGroupItem>

                                <filterbar:FilterGroupItem 
                                 groupName="Group1"
                                 name="Category"
                                 label="{i18n>filterCategory}"
                                 visibleInFilterBar="true">
                                    <filterbar:control>
                                        <MultiComboBox
                                         selectedKeys="{filtersModel>/multiComboBox}"
                                         items="{categoriesModel>/categories}">
                                            <core:Item 
                                             key="{categoriesModel>id}"
                                             text="{categoriesModel>name}"/>
                                        </MultiComboBox>
                                    </filterbar:control>
                                </filterbar:FilterGroupItem>

                                <filterbar:FilterGroupItem 
                                 groupName="Group1"
                                 name="Date"
                                 label="{i18n>filterDate}"
                                 visibleInFilterBar="true">
                                    <filterbar:control>
                                        <DateRangeSelection
                                         dateValue="{filtersModel>/releaseDate/startDate}"
                                         secondDateValue="{filtersModel>/releaseDate/endDate}"
                                         valueFormat="yyyy-MM-dd">
                                        </DateRangeSelection>
                                    </filterbar:control>
                                </filterbar:FilterGroupItem>
                                
                                <filterbar:FilterGroupItem 
                                 groupName="Group1"
                                 name="Suppliers"
                                 label="{i18n>filterSupplier}"
                                 visibleInFilterBar="true">
                                    <filterbar:control>
                                        <Input 
                                         value="{filtersModel>/suppliers}"
                                         showSuggestion="true"
                                         suggestionItems="{suppliersModel>/suppliers}"
                                         showClearIcon="true">
                                            <core:ListItem
                                                text="{suppliersModel>name}"/>
                                        </Input>
                                    </filterbar:control>
                                </filterbar:FilterGroupItem>
                            </filterbar:filterGroupItems>
                        </filterbar:FilterBar>
                    </f:content>
                </f:DynamicPageHeader>
            </f:header>
                
            <f:content>
                <Table
                 id="idProductsTable"
                 items="{productsModel>/products}" 
                 mode="MultiSelect" 
                 selectionChange="onProductsTableSelectionChange">
                    <headerToolbar>
                        <Toolbar>
                            <Button text="{i18n>buttonCreate}"></Button>
                            <Button 
                             press="onDeleteButtonPress"
                             text="{i18n>buttonDelete}" 
                             enabled="{deleteButtonModel>/deleteEnabled}" 
                             type="Reject">
                            </Button>
                        </Toolbar>
                    </headerToolbar>
                    <columns>
                        <Column>
                            <HBox alignItems="Center">
                                <Text text="{i18n>tableName}"></Text>
                                <Button 
                                 class="sapUiSmallMarginBegin"
                                 icon="sap-icon://sort"
                                 press="onButtonSortPress">
                                    <customData>
                                        <core:CustomData
                                         key="sortProperty"
                                         value="name"
                                         writeToDom="true"/>
                                    </customData>
                                </Button>
                            </HBox>
                        </Column>

                        <Column>
                            <HBox alignItems="Center">
                                <Text text="{i18n>tableDescription}"></Text>
                                <Button 
                                class="sapUiSmallMarginBegin"
                                icon="sap-icon://sort"
                                press="onButtonSortPress">
                                    <customData>
                                        <core:CustomData
                                        key="sortProperty"
                                        value="description"
                                        writeToDom="true"/>
                                    </customData>
                                </Button>
                            </HBox>
                        </Column>

                        <Column>
                            <HBox alignItems="Center">
                                <Text text="{i18n>tableReleaseDate}"></Text>
                                <Button 
                                class="sapUiSmallMarginBegin"
                                icon="sap-icon://sort"
                                press="onButtonSortPress">
                                    <customData>
                                        <core:CustomData
                                        key="sortProperty"
                                        value="releaseDate"
                                        writeToDom="true"/>
                                    </customData>
                                </Button>
                            </HBox>
                        </Column>

                        <Column>
                            <HBox alignItems="Center">
                                <Text text="{i18n>tablePrice}"></Text>
                                <Button 
                                class="sapUiSmallMarginBegin"
                                icon="sap-icon://sort"
                                press="onButtonSortPress">
                                    <customData>
                                        <core:CustomData
                                        key="sortProperty"
                                        value="price"
                                        writeToDom="true"/>
                                    </customData>
                                </Button>
                            </HBox>
                        </Column>

                        <Column>
                            <HBox alignItems="Center">
                                <Text text="{i18n>tableRating}"></Text>
                                <Button 
                                class="sapUiSmallMarginBegin"
                                icon="sap-icon://sort"
                                press="onButtonSortPress">
                                    <customData>
                                        <core:CustomData
                                        key="sortProperty"
                                        value="price"
                                        writeToDom="true"/>
                                    </customData>
                                </Button>
                            </HBox>
                        </Column>
                    </columns>

                    <ColumnListItem
                        highlight="{
                            path: 'productsModel>discountDate',
                            formatter: '.formatter.highlightRow'
                        }">
                        <Text text="{productsModel>name}"></Text>
                        <Text text="{productsModel>description}"></Text>
                                <Text text="{
                            path: 'productsModel>releaseDate',
                            type: 'sap.ui.model.type.Date',
                            formatOptions: {
                                style: 'medium',
                                source: {
                                    pattern: 'yyyy-MM-dd'
                                }
                            }
                        }">
                        </Text>
                        <ObjectNumber 
                            number="{productsModel>price}"
                            unit="$"
                            state="Success">
                        </ObjectNumber>
                        <RatingIndicator 
                            value="{productsModel>rating}" 
                            iconSize="14px"
                            editable="false">
                        </RatingIndicator>
                    </ColumnListItem>
                </Table>
            </f:content>
        </f:DynamicPage>

        <MessagePopover id="idConfirmationMessagePopover">
            <headerButton>
                <Button icon="sap-icon://close"></Button>
            </headerButton>
            <items>
                <MessageItem id="idMessageItem" title="{i18n>deleteDialogTitle}" type="Warning">
                    <Link text="{i18n>buttonYes}" emphasized="true" press="onLinkDeletionPress"></Link>
                </MessageItem>
            </items>
        </MessagePopover>
    </Page>
</mvc:View>